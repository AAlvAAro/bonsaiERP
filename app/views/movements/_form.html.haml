= simple_form_for(transaction, :html => {:id => 'transaction_form', :class => 'enter ui-form'}) do |f|
  = bonsai_form_error(f)

  .fs110= f.input :ref_number, :label => 'Nº de referencia', :input_html => {:size => 20}

  %input#transaction-type(type='hidden' value="#{transaction.type}")

  .row-fluid
    .span3
      = f.input :date, :label => "Fecha"
    .span3
      - if transaction.is_a?(Income)
        = f.input :state, collection: presenter.state_collection, label: 'Tipo', as: :radio, item_wrapper_class: 'inline'

    .span6
      = f.input :contact_id, :as => :contact, :label => false, :input_html => {:id => 'transaction_contact_id'}

  %hr.light
  .row-fluid
    .span6
      = f.association :project,  :label => 'Proyecto',
        :input_html => {'data-new_url' => new_project_path, 'data-title' => "Nuevo proyecto", 'data-trigger' => 'new_project', 'data-width' => "900" }
    .span6
      = f.association :currency, :label => 'Moneda/Tipo de cambio. <span class="rate_details n black"></span>'.html_safe, :include_blank => false,
        :input_html => {:id => 'transaction_currency_id'}
      = f.input :exchange_rate, :as => :hidden, :input_html => {:id => 'transaction_exchange_rate'}

  %hr.light
  .row-fluid
    .span3
      %label.radio.inline
        = f.radio_button :fact, true, :class => 'fact'
        Factura
      %label.radio.inline
        = f.radio_button :fact, false, :class => 'fact'
        Recibo
    .span3
      = f.input :bill_number, :label => 'Nº de <span id="fact_label"></span>'.html_safe, :input_html => {:size => 20}
    .span6
      = f.input :description, :label => 'Descripción', :as => :text, :input_html => {:rows => 3, :cols => 40}

  -# Render items
  =render "transactions/form_items", :f => f, :transaction => transaction

-# Currency Form
#currency_form.ajax-modal{ :style => 'display:none;'}
  %h4.red Advertencia! Verifique los precios de los items, serán modificados

  %label Tipo de cambio
  %span.currency_symbol.b
  1
  \= 
  %span.default_symbol.b
  %input{:type => 'text', :size => 8, :class => 'r', :id => 'exchange_rate', :value => transaction.exchange_rate}
  %button#exchange_rate_button.button Cambiar
