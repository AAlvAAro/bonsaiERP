= simple_form_for @loan, :url => presenter.loan_url do |f|
  =f.input :operation, :as => :hidden
  .row
    .span3
      = f.input :ref_number, :label => 'NÂº de referencia', :input_html => {:size => 20}
    .span3
      = f.input :date, :label => 'Fecha'

    .span6
      = f.input :contact_id, :as => :contact, :label => false, :input_html => {:id => 'transaction_contact_id'}
  .row
    .span6
      = f.association :account, :label => "Cuenta", :input_html => {:id => 'account_id'}
    .span6
      = f.input :total, :label => "Cantidad <span class='currency'></span>", :input_html => { :type => "decimal" }

  = f.submit "Salvar", :class => "b btn btn-success"

:javascript
  $(function() {
    $('#transaction_contact_id').contactAutocomplete(["Client", "Supplier"], {'id': 'contact_autocomplete'});

    var currencies = #{Currency.to_hash.to_json}
    var accounts = #{presenter.account_currencies.to_json}

    function setSymbol() {
      var val = $('#account_id').val();

      if(val) {
        $('.currency').html(currencies[accounts[val]].symbol);
      }
    }
    setSymbol();

    $('#account_id').live('change', function() { setSymbol() });


  });
