- content_for :links do
  %ul.breadcrumbs.span6
    %li
      =link_to @inv.store, @inv.store
    %li
      %i.icon-caret-right
    %li
      Egreso de items

.row-fluid
  .span12
    %h2
      = @inv.inventory.ref_number
      %small.text-error Egreso de items

- inv = @inv

= simple_form_for inv, url: store_inventory_outs_path(@inv.store_id) do |f|
  = f.hidden_field :store_id
  .row-fluid
    .span3
      %label Almacen
      %h4.n= link_to inv.store, inv.store, target: '_blank'
    .span3
      = f.input :date, label: 'Fecha', as: :datepicker
    .span6
      = f.input :description, as: :text, label: 'Descripción' ,input_html: {rows: 3}

  .row-fluid
    %table#items.table.decorated
      %tr
        %th Item
        %th Cantidad
        %th Unidad
        %th

      = f.simple_fields_for :inventory_details do |det|
        %tr.item
          %td
            = det.input :item, label: false, as: :autocomplete, 
              input_html: {class: 'item_id span10', placeholder: 'Escriba para buscar el ítem', 
              data: {new_url: '/items/new', source: items_path(format: :json)} }
          %td
            = det.input :quantity, label: false, input_html: {type: :decimal, size: 10,
              data: {value: 'item.quantity'}}
          %td
            %span.unit
          %td
            %a.dark.btn(href='javascript:;' data-on-click='item:deleteItem')
              %i.icon-trash

      %tr.last
        %td(colspan="3")
          %a.btn.btn-primary(href='javascript:;' data-on-click='inventory:addItem')
            %i.icon-plus-sign
            Adicionar item

    .form-actions
      = f.submit 'Egreso ítems', class: 'btn btn-danger b'

:javascript
  $(function() {
    var inv = new App.Inventory('out');
  });

