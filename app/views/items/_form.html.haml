= simple_form_for(@item) do |f|
  = bonsai_form_error(f)
  /= f.input :ctype, :as => :hidden
  = hidden_field_tag "scope", params[:scope] if params[:scope].present?

  = f.input :code, :label => 'CÃ³digo'
  = f.input :name, :label => 'Nombre'
  .clear
  /= f.input :unitary_cost, :label => 'Costo unitario', :input_html => {:size => 12}
  = f.input :price, :label => "Precio de venta #{currency_symbol}", :input_html => {:size => 12}
  .input
    = f.association :unit, :collection => Unit.org,:label => "Unidad", :input_html => { 'data-new_url' => new_unit_path, 'data-trigger' => 'new_unit', 'data-title' => 'Nueva unidad de medidad' }
  .clear
    = f.input :active, :label => "Activo", :as => :radio

  = f.input :ctype, :label => 'Tipo', :collection => Item.get_types(params[:scope]), :as => :radio
  /= f.input :discount, :label => 'Descuento en venta (%)', :hint => 'Ej: 10:2.5 20:4'
  /= f.input :tag_list, :label => 'Etiquetas', :hint => 'Escriba palabras separadas por comas, Ej.: grande, costoso'
  = f.input :description, :as => :text, :input_html => {:rows => 5}
  .clear
  
  = f.submit "Salvar"

:javascript
  head.ready(function() {
    $('body').live('new_unit', function(e, resp) {
      var label = resp.name + " (" + resp.symbol + ")";
      $('#item_unit_id').createSelectOption(resp.id, label);
    });
  });
